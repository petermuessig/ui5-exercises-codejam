//@ui5-bundle codejam/Component-preload.js
sap.ui.require.preload({
	"codejam/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent"],function(n){"use strict";return n.extend("sap.codejam.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"],manifest:"json"},init:function(){n.prototype.init.apply(this,arguments)}})});
},
	"codejam/controller/App.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,o,r){"use strict";return e.extend("sap.codejam.controller.App",{onInit:function(){this.getView().setModel(new t({itemSelected:false,selectedQuantity:1}),"userSelection")},onSelect:function(e){let t=this.getView().getModel("userSelection");let o=e.getSource().getBindingContext().sPath;let r=e.getSource().getModel().getProperty(o);t.setProperty("/selectedItemPath",o);t.setProperty("/selectedItemData",r);t.setProperty("/selectedQuantity",1);this.getView().byId("orderStatus").setText("");t.setProperty("/itemSelected",true)},onSubmitOrder:function(){let e=this.getView();let t=e.getModel("userSelection").getData();let o={url:"/browse/submitOrder",method:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:JSON.stringify({book:t.selectedItemData.ID,quantity:t.selectedQuantity})};let r=e.getModel("i18n");jQuery.ajax(o).done(function(o){console.log(o);e.byId("orderStatus").setText(`${r.getProperty("orderSuccessful")} \n                            (${t.selectedItemData.title}, \n                            ${t.selectedQuantity} \n                            ${r.getProperty("pieces")})`);e.byId("orderStatus").setState("Success");let s=e.getModel("userSelection").getProperty("/selectedItemPath");e.getModel().setProperty(s+"/stock",o.stock);e.getModel("userSelection").setProperty("/selectedItemData/stock",o.stock)}).fail(function(t){console.log(t);e.byId("orderStatus").setText(`${r.getProperty("Error")}`);e.byId("orderStatus").setState("Error")})},onSearch:function(e){var t=[];var s=e.getParameter("newValue");if(s){t.push(new o("title",r.Contains,s))}var l=this.byId("booksTable");var i=l.getBinding("items");i.filter(t);let n=this.getView().getModel("userSelection");n.setProperty("/selectedItemPath",{});n.setProperty("/selectedItemData",{});this.getView().byId("orderStatus").setText("");n.setProperty("/itemSelected",false)}})});
},
	"codejam/i18n/i18n_de.properties":'    Bookshop=Buchhandlung\n    Book=Buch\n    Author=Autor\n    Genre=Genre\n    Price=Preis\n    Stock=Verf\\u00fcgbarkeit\n    Order=Bestellen\n    orderSuccessful=Bestellung erfolgreich\n    pieces=Stk.\n    Error=Fehler',
	"codejam/i18n/i18n_en.properties":'    Bookshop=Bookshop\n    Book=Book\n    Author=Author\n    Genre=Genre\n    Price=Price\n    Stock=Stock\n    Order=Order\n    orderSuccessful=Order successful\n    pieces=pcs.\n    Error=Error',
	"codejam/manifest.json":'{"sap.app":{"id":"codejam","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":["en","de"],"fallbackLocale":"en"},"title":"CodeJam Bookshop","applicationVersion":{"version":"1.0.0"},"dataSources":{"capBooks":{"uri":"/browse/Books?$expand=genre","type":"JSON"}}},"sap.ui5":{"dependencies":{"minUI5Version":"1.70.0","libs":{"sap.ui.core":{},"sap.m":{}}},"rootView":{"viewName":"sap.codejam.view.App","type":"XML","id":"app","async":true},"models":{"":{"dataSource":"capBooks"},"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"sap.codejam.i18n.i18n","supportedLocales":["en","de"],"fallbackLocale":"en"}}},"resources":{"css":[{"uri":"css/style.css"}]}}}',
	"codejam/view/App.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.codejam.controller.App"><App><pages><Page title="{i18n>Bookshop}"><content><Panel\n                headerText="Hello, Dev! ðŸ‘‹"><content><SearchField liveChange=".onSearch"/><Table\n                        id="booksTable"\n                        items="{/value}"><columns><Column><Text text="{i18n>Book}" /></Column><Column><Text text="{i18n>Author}" /></Column><Column><Text text="{i18n>Genre}" /></Column><Column><Text text="{i18n>Price}" /></Column><Column><Text text="{i18n>Stock}" /></Column></columns><items><ColumnListItem \n                                vAlign="Middle"\n                                press=".onSelect"\n                                type="Active"><cells><ObjectIdentifier\n                                        title="{title}"/><Text\n                                        text="{author}" /><Text\n                                        text="{genre/name}" /><ObjectNumber\n                                        number="{price}"\n                                        unit="{currency_code}" /><ObjectStatus \n                                        text="{stock}"\n                                        state="{=\n                                            ${stock} >= 20\n                                                ? \'Success\'\n                                            : ${stock} > 0\n                                                ? \'Warning\'\n                                            : \'Error\'}" /></cells></ColumnListItem></items></Table><FlexBox direction="Column" class="sapUiMediumMarginTop"><FlexBox alignItems="Center" justifyContent="End" class="orderControls" ><ObjectStatus id="orderStatus" text="" /><Button \n                                text="Order"\n                                press=".onSubmitOrder"\n                                enabled="{= \n                                    ${userSelection>/itemSelected} === true \n                                        ? ${userSelection>/selectedItemData/stock} === 0 \n                                            || ${userSelection>/selectedQuantity} === 0\n                                            ? false \n                                            : true \n                                        : false}" /><StepInput\n                                value="{userSelection>/selectedQuantity}"\n                                min="0"\n                                textAlign="Center"\n                                max="{userSelection>/selectedItemData/stock}"\n                                enabled="{= \n                                    ${userSelection>/itemSelected} === true \n                                        ? ${userSelection>/selectedItemData/stock} === 0 \n                                            ? false \n                                            : true \n                                        : false}" /></FlexBox><FlexBox direction="Column" ><Title text="{userSelection>/selectedItemData/title}" /><Text \n                                text="{userSelection>/selectedItemData/descr}"\n                                class="sapUiSmallMarginTop" /></FlexBox></FlexBox></content></Panel></content></Page></pages></App></mvc:View>'
});
